{"version":3,"file":"js/172.d64abbd4.js","mappings":"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","sources":["webpack://badminton-registration/./src/views/admin/RegistrationManagement.vue","webpack://badminton-registration/./src/views/admin/RegistrationManagement.vue?62a2"],"sourcesContent":["<template>\r\n  <div class=\"registration-management\">\r\n    <div class=\"container py-4\">\r\n      <h1>報名管理</h1>\r\n      \r\n      <!-- 篩選選項 -->\r\n      <div class=\"card mb-4\">\r\n        <div class=\"card-header bg-primary text-white\">\r\n          <h5 class=\"mb-0\">篩選報名記錄</h5>\r\n        </div>\r\n        <div class=\"card-body\">\r\n          <div class=\"row\">\r\n            <div class=\"col-md-4 mb-3\">\r\n              <label for=\"filterSession\" class=\"form-label\">場次</label>\r\n              <select id=\"filterSession\" class=\"form-select\" v-model=\"filterOptions.sessionId\">\r\n                <option value=\"\">全部場次</option>\r\n                <option v-for=\"session in sessions\" :key=\"session.id\" :value=\"session.id\">\r\n                  {{ session.title }}\r\n                </option>\r\n              </select>\r\n            </div>\r\n            \r\n            <div class=\"col-md-4 mb-3\">\r\n              <label for=\"filterPayment\" class=\"form-label\">付款狀態</label>\r\n              <select id=\"filterPayment\" class=\"form-select\" v-model=\"filterOptions.paymentStatus\">\r\n                <option value=\"\">全部狀態</option>\r\n                <option value=\"已付款\">已付款</option>\r\n                <option value=\"未付款\">未付款</option>\r\n              </select>\r\n            </div>\r\n            \r\n            <div class=\"col-md-4 mb-3 d-flex align-items-end\">\r\n              <button class=\"btn btn-primary w-100\" @click=\"applyFilters\">套用篩選</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <!-- 報名列表 -->\r\n      <div class=\"card\">\r\n        <div class=\"card-header bg-secondary text-white\">\r\n          <h5 class=\"mb-0\">報名記錄</h5>\r\n        </div>\r\n        <div class=\"card-body\">\r\n          <div v-if=\"loading\" class=\"text-center py-4\">\r\n            <div class=\"spinner-border text-primary\" role=\"status\">\r\n              <span class=\"visually-hidden\">載入中...</span>\r\n            </div>\r\n            <p>載入報名記錄...</p>\r\n          </div>\r\n          \r\n          <div v-else-if=\"filteredRegistrations.length === 0\" class=\"text-center py-4\">\r\n            <p>沒有找到符合條件的報名記錄</p>\r\n          </div>\r\n          \r\n          <div v-else>\r\n            <div class=\"table-responsive\">\r\n              <table class=\"table table-striped\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>場次</th>\r\n                    <th>報名者</th>\r\n                    <th>參加人數</th>\r\n                    <th>報名時間</th>\r\n                    <th>付款狀態</th>\r\n                    <th>操作</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr v-for=\"reg in filteredRegistrations\" :key=\"reg.id\">\r\n                    <td>{{ getSessionTitle(reg.sessionId) }}</td>\r\n                    <td>{{ reg.participants[0].name }}</td>\r\n                    <td>{{ reg.participants.length }}</td>\r\n                    <td>{{ formatDate(reg.timestamp) }}</td>\r\n                    <td>\r\n                      <span :class=\"reg.paymentStatus === '已付款' ? 'badge bg-success' : 'badge bg-warning'\">\r\n                        {{ reg.paymentStatus }}\r\n                      </span>\r\n                    </td>\r\n                    <td>\r\n                      <button \r\n                        class=\"btn btn-sm btn-outline-success me-1\" \r\n                        v-if=\"reg.paymentStatus !== '已付款'\"\r\n                        @click=\"markAsPaid(reg.id)\"\r\n                      >\r\n                        標記為已付款\r\n                      </button>\r\n                      \r\n                      <button \r\n                        class=\"btn btn-sm btn-outline-info me-1\" \r\n                        @click=\"viewRegistrationDetails(reg)\"\r\n                      >\r\n                        查看詳情\r\n                      </button>\r\n                      \r\n                      <button \r\n                        class=\"btn btn-sm btn-outline-danger\" \r\n                        @click=\"deleteRegistration(reg.id, reg.sessionId, reg.participants.length)\"\r\n                      >\r\n                        移除報名\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n    <!-- 報名詳情彈窗 -->\r\n    <div class=\"modal fade\" id=\"registrationDetailModal\" tabindex=\"-1\" aria-labelledby=\"registrationDetailModalLabel\" aria-hidden=\"true\">\r\n      <div class=\"modal-dialog modal-lg\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"registrationDetailModalLabel\">報名詳情</h5>\r\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n          </div>\r\n          <div class=\"modal-body\" v-if=\"selectedRegistration\">\r\n            <div class=\"mb-4\">\r\n              <h5>場次資訊</h5>\r\n              <table class=\"table table-bordered\">\r\n                <tbody>\r\n                  <tr>\r\n                    <th width=\"120\">場次名稱</th>\r\n                    <td>{{ getSessionTitle(selectedRegistration.sessionId) }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>報名時間</th>\r\n                    <td>{{ formatDate(selectedRegistration.timestamp) }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>付款狀態</th>\r\n                    <td>\r\n                      <span :class=\"selectedRegistration.paymentStatus === '已付款' ? 'badge bg-success' : 'badge bg-warning'\">\r\n                        {{ selectedRegistration.paymentStatus }}\r\n                      </span>\r\n                    </td>\r\n                  </tr>\r\n                  <tr v-if=\"selectedRegistration.notes\">\r\n                    <th>備註</th>\r\n                    <td>{{ selectedRegistration.notes }}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            \r\n            <div class=\"mb-4\">\r\n              <h5>參加者清單 (共 {{ selectedRegistration.participants.length }} 人)</h5>\r\n              <table class=\"table table-bordered\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>#</th>\r\n                    <th>姓名</th>\r\n                    <th>電話</th>\r\n                    <th>電子郵件</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr v-for=\"(participant, index) in selectedRegistration.participants\" :key=\"index\">\r\n                    <td>{{ index + 1 }}</td>\r\n                    <td>{{ participant.name }}</td>\r\n                    <td>{{ participant.phone }}</td>\r\n                    <td>{{ participant.email }}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            \r\n            <div class=\"mt-3\" v-if=\"selectedRegistration.paymentStatus !== '已付款'\">\r\n              <button \r\n                class=\"btn btn-success\"\r\n                @click=\"markAsPaid(selectedRegistration.id)\"\r\n              >\r\n                標記為已付款\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">關閉</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n/* eslint-disable no-unused-vars, no-undef */\r\nimport { ref, computed, onMounted } from 'vue';\r\nimport { \r\n  collection, \r\n  query, \r\n  orderBy, \r\n  getDocs, \r\n  getDoc, \r\n  doc, \r\n  updateDoc, \r\n  deleteDoc, \r\n  serverTimestamp, \r\n  increment \r\n} from 'firebase/firestore';\r\nimport { onAuthStateChanged } from 'firebase/auth';\r\nimport { db, auth } from '@/firebase';\r\nimport { useRouter } from 'vue-router';\r\n\r\nexport default {\r\n  name: 'RegistrationManagement',\r\n  setup() {\r\n    const router = useRouter();\r\n    const registrations = ref([]);\r\n    const sessions = ref([]);\r\n    const loading = ref(true);\r\n    const currentUser = ref(null);\r\n    const selectedRegistration = ref(null);\r\n    \r\n    const filterOptions = ref({\r\n      sessionId: '',\r\n      paymentStatus: ''\r\n    });\r\n    \r\n    // Modal instance\r\n    let detailModal = null;\r\n    \r\n    onMounted(() => {\r\n      // 檢查用戶權限\r\n      onAuthStateChanged(auth, async (user) => {\r\n        if (user) {\r\n          currentUser.value = user;\r\n          // 檢查是否為管理員\r\n          const userDoc = await getDoc(doc(db, 'users', user.uid));\r\n          if (userDoc.exists() && userDoc.data().role === 'admin') {\r\n            // 獲取場次列表和報名記錄\r\n            await fetchSessions();\r\n            await fetchRegistrations();\r\n          } else {\r\n            // 非管理員導回儀表板\r\n            alert('您沒有管理員權限');\r\n            router.push('/dashboard');\r\n          }\r\n        } else {\r\n          router.push('/login');\r\n        }\r\n      });\r\n      \r\n      // 初始化Bootstrap Modal\r\n      if (typeof window !== 'undefined' && window.bootstrap) {\r\n        detailModal = new window.bootstrap.Modal(document.getElementById('registrationDetailModal'));\r\n      }\r\n    });\r\n    \r\n    const fetchSessions = async () => {\r\n      try {\r\n        const sessionsQuery = query(\r\n          collection(db, 'sessions'),\r\n          orderBy('date', 'desc')\r\n        );\r\n        \r\n        const querySnapshot = await getDocs(sessionsQuery);\r\n        sessions.value = querySnapshot.docs.map(doc => ({\r\n          id: doc.id,\r\n          ...doc.data(),\r\n          date: doc.data().date.toDate()\r\n        }));\r\n      } catch (e) {\r\n        console.error('Error fetching sessions:', e);\r\n        alert('載入場次資料失敗，請稍後再試');\r\n      }\r\n    };\r\n    \r\n    const fetchRegistrations = async () => {\r\n      try {\r\n        loading.value = true;\r\n        const registrationsQuery = query(\r\n          collection(db, 'registrations'),\r\n          orderBy('timestamp', 'desc')\r\n        );\r\n        \r\n        const querySnapshot = await getDocs(registrationsQuery);\r\n        registrations.value = querySnapshot.docs.map(doc => ({\r\n          id: doc.id,\r\n          ...doc.data(),\r\n          timestamp: doc.data().timestamp?.toDate() || new Date()\r\n        }));\r\n      } catch (e) {\r\n        console.error('Error fetching registrations:', e);\r\n        alert('載入報名記錄失敗，請稍後再試');\r\n      } finally {\r\n        loading.value = false;\r\n      }\r\n    };\r\n    \r\n    const getSessionTitle = (sessionId) => {\r\n      const session = sessions.value.find(s => s.id === sessionId);\r\n      return session ? session.title : '未知場次';\r\n    };\r\n    \r\n    const applyFilters = () => {\r\n      // 重新載入報名記錄（已經有本地篩選，不需要重新獲取資料）\r\n    };\r\n    \r\n    const markAsPaid = async (registrationId) => {\r\n      const confirmMark = confirm('確定將此報名標記為已付款？');\r\n      if (!confirmMark) return;\r\n      \r\n      try {\r\n        await updateDoc(doc(db, 'registrations', registrationId), {\r\n          paymentStatus: '已付款',\r\n          paidAt: serverTimestamp(),\r\n          updatedBy: currentUser.value.uid\r\n        });\r\n        \r\n        // 更新本地報名資料\r\n        const index = registrations.value.findIndex(r => r.id === registrationId);\r\n        if (index !== -1) {\r\n          registrations.value[index].paymentStatus = '已付款';\r\n        }\r\n        \r\n        // 如果正在查看詳情，關閉彈窗\r\n        if (detailModal) {\r\n          detailModal.hide();\r\n        }\r\n        \r\n        alert('已成功標記為已付款');\r\n      } catch (e) {\r\n        console.error('Error marking as paid:', e);\r\n        alert('操作失敗，請稍後再試');\r\n      }\r\n    };\r\n    \r\n    const viewRegistrationDetails = (registration) => {\r\n      selectedRegistration.value = registration;\r\n      \r\n      if (detailModal) {\r\n        detailModal.show();\r\n      }\r\n    };\r\n    \r\n    const deleteRegistration = async (registrationId, sessionId, participantsCount) => {\r\n      const confirmDelete = confirm('確定要移除此報名記錄？此操作無法還原');\r\n      if (!confirmDelete) return;\r\n      \r\n      try {\r\n        // 刪除報名記錄\r\n        await deleteDoc(doc(db, 'registrations', registrationId));\r\n        \r\n        // 更新場次的參加人數\r\n        const sessionRef = doc(db, 'sessions', sessionId);\r\n        await updateDoc(sessionRef, {\r\n          currentParticipants: increment(-participantsCount)\r\n        });\r\n        \r\n        // 從列表中移除報名記錄\r\n        registrations.value = registrations.value.filter(r => r.id !== registrationId);\r\n        \r\n        alert('報名記錄已成功移除');\r\n      } catch (e) {\r\n        console.error('Error deleting registration:', e);\r\n        alert('移除報名失敗，請稍後再試');\r\n      }\r\n    };\r\n    \r\n    // 篩選後的報名記錄\r\n    const filteredRegistrations = computed(() => {\r\n      let filtered = [...registrations.value];\r\n      \r\n      if (filterOptions.value.sessionId) {\r\n        filtered = filtered.filter(r => r.sessionId === filterOptions.value.sessionId);\r\n      }\r\n      \r\n      if (filterOptions.value.paymentStatus) {\r\n        filtered = filtered.filter(r => r.paymentStatus === filterOptions.value.paymentStatus);\r\n      }\r\n      \r\n      return filtered;\r\n    });\r\n    \r\n    const formatDate = (date) => {\r\n      if (!date) return '未知時間';\r\n      \r\n      return new Date(date).toLocaleString('zh-TW', {\r\n        year: 'numeric',\r\n        month: 'long',\r\n        day: 'numeric',\r\n        hour: '2-digit',\r\n        minute: '2-digit'\r\n      });\r\n    };\r\n    \r\n    return {\r\n      registrations,\r\n      sessions,\r\n      loading,\r\n      filterOptions,\r\n      filteredRegistrations,\r\n      selectedRegistration,\r\n      getSessionTitle,\r\n      applyFilters,\r\n      markAsPaid,\r\n      viewRegistrationDetails,\r\n      deleteRegistration,\r\n      formatDate\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.registration-management {\r\n  padding-bottom: 2rem;\r\n}\r\n\r\n.card {\r\n  margin-bottom: 1.5rem;\r\n  box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);\r\n}\r\n\r\n.badge {\r\n  font-size: 0.875rem;\r\n  padding: 0.35em 0.65em;\r\n}\r\n\r\n.btn-sm {\r\n  padding: 0.25rem 0.5rem;\r\n  font-size: 0.875rem;\r\n}\r\n</style>","import { render } from \"./RegistrationManagement.vue?vue&type=template&id=554f6fc4&scoped=true\"\nimport script from \"./RegistrationManagement.vue?vue&type=script&lang=js\"\nexport * from \"./RegistrationManagement.vue?vue&type=script&lang=js\"\n\nimport \"./RegistrationManagement.vue?vue&type=style&index=0&id=554f6fc4&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-554f6fc4\"]])\n\nexport default __exports__"],"names":["class","key","id","tabindex","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","for","_cache","$event","$setup","filterOptions","sessionId","value","_Fragment","_renderList","sessions","session","title","_hoisted_7","_hoisted_8","paymentStatus","_hoisted_9","onClick","args","applyFilters","_hoisted_10","_hoisted_11","loading","_hoisted_12","role","filteredRegistrations","length","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","reg","_toDisplayString","getSessionTitle","participants","name","formatDate","timestamp","_normalizeClass","markAsPaid","_hoisted_17","_createCommentVNode","viewRegistrationDetails","_hoisted_18","deleteRegistration","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","type","selectedRegistration","_hoisted_23","_hoisted_24","_hoisted_25","width","notes","_hoisted_26","_hoisted_27","_hoisted_28","participant","index","phone","email","_hoisted_29","setup","router","useRouter","registrations","ref","currentUser","detailModal","onMounted","onAuthStateChanged","auth","async","user","userDoc","getDoc","doc","db","uid","exists","data","fetchSessions","fetchRegistrations","alert","push","window","bootstrap","Modal","document","getElementById","sessionsQuery","query","collection","orderBy","querySnapshot","getDocs","docs","map","date","toDate","e","console","error","registrationsQuery","Date","find","s","confirmMark","confirm","updateDoc","registrationId","paidAt","serverTimestamp","updatedBy","findIndex","r","hide","registration","show","participantsCount","confirmDelete","deleteDoc","sessionRef","currentParticipants","increment","filter","computed","filtered","toLocaleString","year","month","day","hour","minute","__exports__","render"],"sourceRoot":""}