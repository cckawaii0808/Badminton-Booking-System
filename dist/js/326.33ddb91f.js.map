{"version":3,"file":"js/326.33ddb91f.js","mappings":"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","sources":["webpack://badminton-registration/./src/views/DashboardView.vue","webpack://badminton-registration/./src/views/DashboardView.vue?7280"],"sourcesContent":["<template>\r\n  <div class=\"dashboard\">\r\n    <div class=\"container py-4\">\r\n      <div class=\"row mb-4\">\r\n        <div class=\"col-12\">\r\n          <h1>個人儀表板</h1>\r\n          <p class=\"lead\">歡迎回來，{{ userData.name || '用戶' }}</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"row mb-4\">\r\n        <div class=\"col-md-6 mb-4 mb-md-0\">\r\n          <div class=\"card h-100\">\r\n            <div class=\"card-header bg-primary text-white\">\r\n              <h5 class=\"mb-0\">我的報名</h5>\r\n            </div>\r\n            <div class=\"card-body\">\r\n              <div v-if=\"loadingRegistrations\" class=\"text-center py-4\">\r\n                <div class=\"spinner-border text-primary\" role=\"status\">\r\n                  <span class=\"visually-hidden\">載入中...</span>\r\n                </div>\r\n                <p>載入報名記錄...</p>\r\n              </div>\r\n              <div v-else-if=\"registrations.length === 0\" class=\"text-center py-4\">\r\n                <p class=\"mb-3\">您尚未報名任何場次</p>\r\n                <router-link to=\"/sessions\" class=\"btn btn-primary\">瀏覽開放場次</router-link>\r\n              </div>\r\n              <div v-else>\r\n                <div v-for=\"reg in registrations\" :key=\"reg.id\" class=\"mb-3 pb-3 border-bottom\">\r\n                  <h5>{{ reg.sessionData.title }}</h5>\r\n                  <p class=\"mb-1\">\r\n                    <i class=\"bi bi-calendar me-1\"></i> <strong>時間：</strong> {{ formatDate(reg.sessionData.date) }}<br>\r\n                    <i class=\"bi bi-geo-alt me-1\"></i> <strong>地點：</strong> {{ reg.sessionData.location }}<br>\r\n                    <i class=\"bi bi-people me-1\"></i> <strong>參加者：</strong> {{ reg.participants.length }} 人<br>\r\n                    <i class=\"bi bi-credit-card me-1\"></i> <strong>繳費：</strong> \r\n                    <span :class=\"reg.paymentStatus === '已付款' ? 'text-success' : 'text-warning'\">\r\n                      {{ reg.paymentStatus }}\r\n                    </span>\r\n                  </p>\r\n                  <div class=\"mt-2\">\r\n                    <button \r\n                      class=\"btn btn-sm btn-outline-info me-2\"\r\n                      @click=\"viewRegistrationDetails(reg)\"\r\n                    >\r\n                      詳情\r\n                    </button>\r\n                    <button \r\n                      v-if=\"isUpcoming(reg.sessionData.date) && reg.paymentStatus !== '已付款'\"\r\n                      class=\"btn btn-sm btn-outline-danger\"\r\n                      @click=\"cancelRegistration(reg.id, reg.sessionId, reg.participants.length)\"\r\n                    >\r\n                      取消報名\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"col-md-6\">\r\n          <div class=\"card h-100\">\r\n            <div class=\"card-header bg-success text-white\">\r\n              <h5 class=\"mb-0\">近期場次</h5>\r\n            </div>\r\n            <div class=\"card-body\">\r\n              <div v-if=\"loadingSessions\" class=\"text-center py-4\">\r\n                <div class=\"spinner-border text-success\" role=\"status\">\r\n                  <span class=\"visually-hidden\">載入中...</span>\r\n                </div>\r\n                <p>載入場次資料...</p>\r\n              </div>\r\n              <div v-else-if=\"upcomingSessions.length === 0\" class=\"text-center py-4\">\r\n                <p>目前沒有即將開放的場次</p>\r\n              </div>\r\n              <div v-else>\r\n                <div v-for=\"session in upcomingSessions\" :key=\"session.id\" class=\"mb-3 pb-3 border-bottom\">\r\n                  <div class=\"d-flex justify-content-between align-items-start\">\r\n                    <h5 class=\"mb-1\">{{ session.title }}</h5>\r\n                    <span \r\n                      class=\"badge\"\r\n                      :class=\"session.status === '開放' ? 'bg-success' : 'bg-danger'\"\r\n                    >\r\n                      {{ session.status }}\r\n                    </span>\r\n                  </div>\r\n                  <p class=\"mb-1\">\r\n                    <i class=\"bi bi-calendar me-1\"></i> <strong>時間：</strong> {{ formatDate(session.date) }}<br>\r\n                    <i class=\"bi bi-geo-alt me-1\"></i> <strong>地點：</strong> {{ session.location }}<br>\r\n                    <i class=\"bi bi-people me-1\"></i> <strong>人數：</strong> {{ session.currentParticipants }}/{{ session.maxParticipants }}<br>\r\n                    <i class=\"bi bi-currency-dollar me-1\"></i> <strong>費用：</strong> {{ session.price }} 元\r\n                  </p>\r\n                  <div class=\"mt-2\">\r\n                    <router-link \r\n                      :to=\"`/registration/${session.id}`\" \r\n                      class=\"btn btn-sm btn-primary\"\r\n                      v-if=\"session.status === '開放' && session.currentParticipants < session.maxParticipants && !isRegistered(session.id)\"\r\n                    >\r\n                      立即報名\r\n                    </router-link>\r\n                    <span v-else-if=\"isRegistered(session.id)\" class=\"badge bg-info\">已報名</span>\r\n                  </div>\r\n                </div>\r\n                <div class=\"text-end mt-3\">\r\n                  <router-link to=\"/sessions\" class=\"btn btn-outline-success\">查看更多場次</router-link>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"row\">\r\n        <div class=\"col-12\">\r\n          <div class=\"card\">\r\n            <div class=\"card-header bg-info text-white\">\r\n              <h5 class=\"mb-0\">個人資料</h5>\r\n            </div>\r\n            <div class=\"card-body\">\r\n              <div class=\"row\">\r\n                <div class=\"col-md-6\">\r\n                  <p><strong>姓名：</strong> {{ userData.name || '未設定' }}</p>\r\n                  <p><strong>電子郵件：</strong> {{ userData.email || '未設定' }}</p>\r\n                  <p><strong>電話：</strong> {{ userData.phone || '未設定' }}</p>\r\n                </div>\r\n                <div class=\"col-md-6 text-md-end\">\r\n                  <button class=\"btn btn-outline-primary\" @click=\"editProfile\">\r\n                    編輯個人資料\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 報名詳情彈窗 -->\r\n    <div class=\"modal fade\" id=\"registrationDetailModal\" tabindex=\"-1\" aria-labelledby=\"registrationDetailModalLabel\" aria-hidden=\"true\">\r\n      <div class=\"modal-dialog modal-lg\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"registrationDetailModalLabel\">報名詳情</h5>\r\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n          </div>\r\n          <div class=\"modal-body\" v-if=\"selectedRegistration\">\r\n            <div class=\"mb-4\">\r\n              <h5>場次資訊</h5>\r\n              <table class=\"table table-bordered\">\r\n                <tbody>\r\n                  <tr>\r\n                    <th width=\"120\">場次名稱</th>\r\n                    <td>{{ selectedRegistration.sessionData?.title }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>時間</th>\r\n                    <td>{{ formatDate(selectedRegistration.sessionData?.date) }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>地點</th>\r\n                    <td>{{ selectedRegistration.sessionData?.location }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>報名時間</th>\r\n                    <td>{{ formatDate(selectedRegistration.timestamp) }}</td>\r\n                  </tr>\r\n                  <tr>\r\n                    <th>付款狀態</th>\r\n                    <td>\r\n                      <span :class=\"selectedRegistration.paymentStatus === '已付款' ? 'badge bg-success' : 'badge bg-warning'\">\r\n                        {{ selectedRegistration.paymentStatus }}\r\n                      </span>\r\n                    </td>\r\n                  </tr>\r\n                  <tr v-if=\"selectedRegistration.notes\">\r\n                    <th>備註</th>\r\n                    <td>{{ selectedRegistration.notes }}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            \r\n            <div class=\"mb-4\">\r\n              <h5>參加者清單 (共 {{ selectedRegistration.participants?.length }} 人)</h5>\r\n              <table class=\"table table-bordered\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>#</th>\r\n                    <th>姓名</th>\r\n                    <th>電話</th>\r\n                    <th>電子郵件</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr v-for=\"(participant, index) in selectedRegistration.participants\" :key=\"index\">\r\n                    <td>{{ index + 1 }}</td>\r\n                    <td>{{ participant.name }}</td>\r\n                    <td>{{ participant.phone }}</td>\r\n                    <td>{{ participant.email }}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">關閉</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 編輯個人資料彈窗 -->\r\n    <div class=\"modal fade\" id=\"editProfileModal\" tabindex=\"-1\" aria-labelledby=\"editProfileModalLabel\" aria-hidden=\"true\">\r\n      <div class=\"modal-dialog\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"editProfileModalLabel\">編輯個人資料</h5>\r\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <form @submit.prevent=\"updateProfile\">\r\n              <div class=\"mb-3\">\r\n                <label for=\"profileName\" class=\"form-label\">姓名</label>\r\n                <input type=\"text\" class=\"form-control\" id=\"profileName\" v-model=\"profileForm.name\" required>\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <label for=\"profilePhone\" class=\"form-label\">電話</label>\r\n                <input type=\"tel\" class=\"form-control\" id=\"profilePhone\" v-model=\"profileForm.phone\" required>\r\n              </div>\r\n              <div class=\"mb-3\">\r\n                <label for=\"profileEmail\" class=\"form-label\">電子郵件</label>\r\n                <input type=\"email\" class=\"form-control\" id=\"profileEmail\" v-model=\"profileForm.email\" required disabled>\r\n                <div class=\"form-text\">電子郵件無法修改</div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">取消</button>\r\n            <button type=\"button\" class=\"btn btn-primary\" @click=\"updateProfile\" :disabled=\"updating\">\r\n              {{ updating ? '儲存中...' : '儲存變更' }}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n/* eslint-disable no-undef */\r\nimport { ref, onMounted } from 'vue';\r\nimport { \r\n  collection, \r\n  query, \r\n  where, \r\n  orderBy, \r\n  limit, \r\n  getDocs, \r\n  getDoc, \r\n  doc, \r\n  updateDoc, \r\n  deleteDoc, \r\n  increment \r\n} from 'firebase/firestore';\r\nimport { onAuthStateChanged } from 'firebase/auth';\r\nimport { db, auth } from '@/firebase';\r\nimport { useRouter } from 'vue-router';\r\n\r\nexport default {\r\n  name: 'DashboardView',\r\n  setup() {\r\n    const router = useRouter();\r\n    const userData = ref({});\r\n    const registrations = ref([]);\r\n    const upcomingSessions = ref([]);\r\n    const loadingRegistrations = ref(true);\r\n    const loadingSessions = ref(true);\r\n    const currentUser = ref(null);\r\n    const selectedRegistration = ref(null);\r\n    const updating = ref(false);\r\n\r\n    const profileForm = ref({\r\n      name: '',\r\n      phone: '',\r\n      email: ''\r\n    });\r\n\r\n    // Modal instances\r\n    let detailModal = null;\r\n    let profileModal = null;\r\n\r\n    onMounted(() => {\r\n      onAuthStateChanged(auth, async (user) => {\r\n        if (user) {\r\n          currentUser.value = user;\r\n          await fetchUserData(user.uid);\r\n          await fetchUserRegistrations(user.uid);\r\n          await fetchUpcomingSessions();\r\n\r\n          // 初始化Bootstrap Modals\r\n          if (typeof window !== 'undefined' && window.bootstrap) {\r\n            // 使用window.bootstrap而不是直接使用bootstrap\r\n            detailModal = new window.bootstrap.Modal(document.getElementById('registrationDetailModal'));\r\n            profileModal = new window.bootstrap.Modal(document.getElementById('editProfileModal'));\r\n          }\r\n        } else {\r\n          router.push('/login');\r\n        }\r\n      });\r\n    });\r\n\r\n    const fetchUserData = async (userId) => {\r\n      try {\r\n        const userDoc = await getDoc(doc(db, 'users', userId));\r\n        if (userDoc.exists()) {\r\n          userData.value = userDoc.data();\r\n          \r\n          // 初始化個人資料表單\r\n          profileForm.value = {\r\n            name: userData.value.name || '',\r\n            phone: userData.value.phone || '',\r\n            email: userData.value.email || ''\r\n          };\r\n        }\r\n      } catch (e) {\r\n        console.error('Error fetching user data:', e);\r\n      }\r\n    };\r\n\r\n    const fetchUserRegistrations = async (userId) => {\r\n      try {\r\n        loadingRegistrations.value = true;\r\n        \r\n        const registrationsQuery = query(\r\n          collection(db, 'registrations'),\r\n          where('userId', '==', userId),\r\n          orderBy('timestamp', 'desc')\r\n        );\r\n        \r\n        const querySnapshot = await getDocs(registrationsQuery);\r\n        \r\n        // 獲取所有報名記錄\r\n        const registrationDocs = querySnapshot.docs.map(doc => ({\r\n          id: doc.id,\r\n          ...doc.data(),\r\n          timestamp: doc.data().timestamp?.toDate() || new Date()\r\n        }));\r\n        \r\n        // 獲取相關場次資料\r\n        for (const reg of registrationDocs) {\r\n          const sessionDoc = await getDoc(doc(db, 'sessions', reg.sessionId));\r\n          if (sessionDoc.exists()) {\r\n            reg.sessionData = {\r\n              id: sessionDoc.id,\r\n              ...sessionDoc.data(),\r\n              date: sessionDoc.data().date.toDate()\r\n            };\r\n          }\r\n        }\r\n        \r\n        registrations.value = registrationDocs;\r\n      } catch (e) {\r\n        console.error('Error fetching registrations:', e);\r\n      } finally {\r\n        loadingRegistrations.value = false;\r\n      }\r\n    };\r\n\r\n    const fetchUpcomingSessions = async () => {\r\n      try {\r\n        loadingSessions.value = true;\r\n        \r\n        const now = new Date();\r\n        const sessionsQuery = query(\r\n          collection(db, 'sessions'),\r\n          where('date', '>=', now),\r\n          orderBy('date'),\r\n          limit(5)\r\n        );\r\n        \r\n        const querySnapshot = await getDocs(sessionsQuery);\r\n        upcomingSessions.value = querySnapshot.docs.map(doc => ({\r\n          id: doc.id,\r\n          ...doc.data(),\r\n          date: doc.data().date.toDate()\r\n        }));\r\n      } catch (e) {\r\n        console.error('Error fetching upcoming sessions:', e);\r\n      } finally {\r\n        loadingSessions.value = false;\r\n      }\r\n    };\r\n\r\n    const viewRegistrationDetails = (registration) => {\r\n      selectedRegistration.value = registration;\r\n      \r\n      if (detailModal) {\r\n        detailModal.show();\r\n      }\r\n    };\r\n\r\n    const cancelRegistration = async (registrationId, sessionId, participantsCount) => {\r\n      const confirmCancel = confirm('確定要取消此報名嗎？');\r\n      if (!confirmCancel) return;\r\n      \r\n      try {\r\n        // 刪除報名記錄\r\n        await deleteDoc(doc(db, 'registrations', registrationId));\r\n        \r\n        // 更新場次的參加人數\r\n        const sessionRef = doc(db, 'sessions', sessionId);\r\n        await updateDoc(sessionRef, {\r\n          currentParticipants: increment(-participantsCount)\r\n        });\r\n        \r\n        // 從列表中移除報名記錄\r\n        registrations.value = registrations.value.filter(r => r.id !== registrationId);\r\n        \r\n        alert('報名已成功取消');\r\n      } catch (e) {\r\n        console.error('Error canceling registration:', e);\r\n        alert('取消報名失敗，請稍後再試');\r\n      }\r\n    };\r\n\r\n    const editProfile = () => {\r\n      // 重新填充表單\r\n      profileForm.value = {\r\n        name: userData.value.name || '',\r\n        phone: userData.value.phone || '',\r\n        email: userData.value.email || ''\r\n      };\r\n      \r\n      if (profileModal) {\r\n        profileModal.show();\r\n      }\r\n    };\r\n\r\n    const updateProfile = async () => {\r\n      if (!profileForm.value.name || !profileForm.value.phone) {\r\n        alert('請填寫所有必填欄位');\r\n        return;\r\n      }\r\n      \r\n      updating.value = true;\r\n      \r\n      try {\r\n        const userRef = doc(db, 'users', currentUser.value.uid);\r\n        \r\n        await updateDoc(userRef, {\r\n          name: profileForm.value.name,\r\n          phone: profileForm.value.phone,\r\n          updatedAt: new Date()\r\n        });\r\n        \r\n        // 更新本地用戶資料\r\n        userData.value = {\r\n          ...userData.value,\r\n          name: profileForm.value.name,\r\n          phone: profileForm.value.phone\r\n        };\r\n        \r\n        // 關閉彈窗\r\n        if (profileModal) {\r\n          profileModal.hide();\r\n        }\r\n        \r\n        alert('個人資料已更新');\r\n      } catch (e) {\r\n        console.error('Error updating profile:', e);\r\n        alert('更新個人資料失敗，請稍後再試');\r\n      } finally {\r\n        updating.value = false;\r\n      }\r\n    };\r\n\r\n    const isUpcoming = (date) => {\r\n      return new Date(date) > new Date();\r\n    };\r\n\r\n    const isRegistered = (sessionId) => {\r\n      return registrations.value.some(reg => reg.sessionId === sessionId);\r\n    };\r\n\r\n    const formatDate = (date) => {\r\n      if (!date) return '未知時間';\r\n      \r\n      return new Date(date).toLocaleString('zh-TW', {\r\n        year: 'numeric',\r\n        month: 'long',\r\n        day: 'numeric',\r\n        hour: '2-digit',\r\n        minute: '2-digit',\r\n        weekday: 'long'\r\n      });\r\n    };\r\n\r\n    return {\r\n      userData,\r\n      registrations,\r\n      upcomingSessions,\r\n      loadingRegistrations,\r\n      loadingSessions,\r\n      selectedRegistration,\r\n      profileForm,\r\n      updating,\r\n      viewRegistrationDetails,\r\n      cancelRegistration,\r\n      editProfile,\r\n      updateProfile,\r\n      isUpcoming,\r\n      isRegistered,\r\n      formatDate\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.dashboard {\r\n  padding-bottom: 2rem;\r\n}\r\n\r\n.card {\r\n  margin-bottom: 1.5rem;\r\n  box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);\r\n}\r\n\r\n.card-header {\r\n  padding: 0.75rem 1.25rem;\r\n}\r\n\r\n.badge {\r\n  font-size: 0.75rem;\r\n  padding: 0.35em 0.65em;\r\n}\r\n\r\n.btn-sm {\r\n  padding: 0.25rem 0.5rem;\r\n  font-size: 0.75rem;\r\n}\r\n\r\n.table th {\r\n  background-color: #f8f9fa;\r\n}\r\n</style>","import { render } from \"./DashboardView.vue?vue&type=template&id=4da5bcdb&scoped=true\"\nimport script from \"./DashboardView.vue?vue&type=script&lang=js\"\nexport * from \"./DashboardView.vue?vue&type=script&lang=js\"\n\nimport \"./DashboardView.vue?vue&type=style&index=0&id=4da5bcdb&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4da5bcdb\"]])\n\nexport default __exports__"],"names":["class","key","id","tabindex","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_toDisplayString","$setup","userData","name","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","loadingRegistrations","_hoisted_10","_cache","role","registrations","length","_hoisted_11","_createVNode","_component_router_link","to","default","_withCtx","_createTextVNode","_","_hoisted_12","_Fragment","_renderList","reg","sessionData","title","_hoisted_13","formatDate","date","location","participants","_normalizeClass","paymentStatus","_hoisted_14","onClick","$event","viewRegistrationDetails","_hoisted_15","isUpcoming","cancelRegistration","sessionId","_hoisted_16","_createCommentVNode","_hoisted_17","_hoisted_18","_hoisted_19","loadingSessions","_hoisted_20","upcomingSessions","_hoisted_21","_hoisted_22","session","_hoisted_23","_hoisted_24","status","_hoisted_25","currentParticipants","maxParticipants","price","_hoisted_26","isRegistered","_createBlock","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","email","phone","_hoisted_35","args","editProfile","_hoisted_36","_hoisted_37","_hoisted_38","type","selectedRegistration","_hoisted_39","_hoisted_40","_hoisted_41","width","timestamp","notes","_hoisted_42","_hoisted_43","_hoisted_44","participant","index","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","onSubmit","_withModifiers","updateProfile","_hoisted_49","for","profileForm","required","_hoisted_50","_hoisted_51","disabled","_hoisted_52","updating","_hoisted_53","setup","router","useRouter","ref","currentUser","detailModal","profileModal","onMounted","onAuthStateChanged","auth","async","user","value","fetchUserData","uid","fetchUserRegistrations","fetchUpcomingSessions","window","bootstrap","Modal","document","getElementById","push","userDoc","getDoc","doc","db","userId","exists","data","e","console","error","registrationsQuery","query","collection","where","orderBy","querySnapshot","getDocs","registrationDocs","docs","map","toDate","Date","sessionDoc","now","sessionsQuery","limit","registration","show","registrationId","participantsCount","confirmCancel","confirm","deleteDoc","sessionRef","updateDoc","increment","filter","r","alert","userRef","updatedAt","hide","some","toLocaleString","year","month","day","hour","minute","weekday","__exports__","render"],"sourceRoot":""}