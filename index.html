<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>羽球報名系統</title>
  </head>
  <body>
    <h2>報名表單</h2>
    <form id="bookingForm">
      <label>姓名：</label>
      <input type="text" id="name" required /><br /><br />

      <label>程度：</label>
      <select id="level">
        <option>新手</option>
        <option>初階</option>
        <option>歡樂</option></select
      ><br /><br />

      <label>場次：</label>
      <input
        type="text"
        id="session"
        placeholder="例如：4/5 南屯A場"
        required
      /><br /><br />

      <button type="submit">報名</button>
    </form>

    <p id="status"></p>

    <script>
      const scriptUrl =
        "https://script.google.com/macros/s/AKfycbxxCQTtl1GNWj313kLab2jh6aq_NQpQlArVRv7ERsCCX1NVQGeu44RrycgAUKwUu79Exg/exec";

      document
        .getElementById("bookingForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();
          const name = document.getElementById("name").value;
          const level = document.getElementById("level").value;
          const session = document.getElementById("session").value;

          fetch(scriptUrl, {
            method: "POST",
            body: JSON.stringify({ name, level, session }),
            headers: {
              "Content-Type": "application/json",
            },
          })
            .then((res) => res.text())
            .then((msg) => {
              document.getElementById("status").textContent = "✅ " + msg;
              document.getElementById("bookingForm").reset();
            })
            .catch((err) => {
              document.getElementById("status").textContent =
                "❌ 發生錯誤，請稍後再試";
            });
        });
    </script>
  </body>
</html>
